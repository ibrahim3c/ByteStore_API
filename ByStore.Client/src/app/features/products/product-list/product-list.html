<div class="container product-list-container py-4">
  <div class="row g-4">
    <!-- Sidebar Filters -->
<div class="col-lg-3 col-md-4">
  <div class="filters shadow-sm bg-white rounded p-4">
    <h5 class="mb-4 text-primary fw-semibold">
      <i class="fa-solid fa-filter me-2"></i> Filters
    </h5>

    <!-- Category -->
    <div class="mb-4">
      <label for="category" class="form-label fw-medium">Category</label>
      <select
        id="category"
        class="form-select"
        [(ngModel)]="productParams.CategoryId"
      >
        <option value="" selected>All Categories</option>
        <option *ngFor="let cat of categories" [value]="cat.id">{{ cat.name }}</option>
      </select>
    </div>

    <!-- Brand -->
    <div class="mb-4">
      <label for="brand" class="form-label fw-medium">Brand</label>
      <select
        id="brand"
        class="form-select"
        [(ngModel)]="productParams.BrandId"
      >
        <option value="" >All Brands</option>
        <option *ngFor="let brand of brands" [value]="brand.id">{{ brand.name }}</option>
      </select>
    </div>

    <!-- Min / Max Price -->
    <div class="mb-4">
      <label class="form-label fw-medium">Price Range</label>
      <div class="d-flex gap-2">
        <input
          type="number"
          class="form-control"
          [(ngModel)]="productParams.MinPrice"
          placeholder="Min"
        />
        <input
          type="number"
          class="form-control"
          [(ngModel)]="productParams.MaxPrice"
          placeholder="Max"
        />
      </div>
    </div>

    <!-- Apply & Reset -->
    <div class="d-flex justify-content-between mt-4">
      <button class="btn btn-accent flex-grow-1 me-2" (click)="applyFilters()">
        <i class="fa-solid fa-check me-1"></i> Apply
      </button>
      <button class="btn btn-outline-secondary flex-grow-1" (click)="resetFilters()">
        <i class="fa-solid fa-rotate-left me-1"></i> Reset
      </button>
    </div>
  </div>
</div>


    <!-- Product List -->
    <div class="col-lg-9 col-md-8">
<!-- Search + Sort -->
<!-- 🔍 Search + Sort Bar -->
<div class="search-sort-container bg-white shadow-sm rounded d-flex flex-wrap justify-content-between align-items-center p-3 mb-4">

  <!-- Search Input -->
  <div class="search-bar flex-grow-1 d-flex align-items-center rounded px-3 py-2 bg-light">
    <i class="fa-solid fa-magnifying-glass text-secondary me-2"></i>
    <input
      type="text"
      class="form-control border-0 bg-light shadow-none"
      placeholder="Search for products..."
      [(ngModel)]="productParams.SearchTerm"
      (input)="searchProduct()"
    />
  </div>

  <!-- Sort Dropdown -->
  <div class="sort-box d-flex align-items-center gap-2 mt-3 mt-md-0 ms-md-3">
    <label class="text-secondary fw-medium mb-0">Sort by:</label>
    <select
      class="form-select form-select-sm border-0 shadow-sm w-auto"
      [(ngModel)]="productParams.OrderBy"
      (change)="onSortChanged()"
    >
      <option value="default">Default</option>
      <option value="price">Price: Low to High</option>
      <option value="price_desc">Price: High to Low</option>
      <option value="category">Category</option>
      <option value="brand">Brand</option>
      <option value="name">Name</option>
    </select>
  </div>
</div>

      <!-- Product Grid -->
      <div class="row g-4">
        <div class="col-lg-4 col-md-6" *ngFor="let product of filteredProducts">
          <app-product-card [product]="product"></app-product-card>
        </div>
      </div>

      <!-- Pagination -->
      <!-- <div class="pagination-container d-flex justify-content-center mt-4">
        <ngb-pagination
          [collectionSize]="filteredProducts.length"
          [(page)]="productParams.PageNumber"
          [pageSize]="productParams.PageSize"
          (pageChange)="onPageChange()"
          [maxSize]="5"
          [boundaryLinks]="true"
        ></ngb-pagination>
      </div> -->

      <!-- Manual Pagination -->
<div class="pagination-container d-flex justify-content-center mt-4">
  <ul class="pagination mb-0">
    <!-- Previous Button -->
    <li
      class="page-item"
      [class.disabled]="!metaData?.HasPrevious"
      (click)="metaData?.HasPrevious &&  onPageChange(productParams.PageNumber - 1)"
      >
      <a class="page-link">&laquo; Prev</a>
    </li>

    <!-- Page Numbers -->
    <li
      class="page-item"
      *ngFor="let page of [].constructor(metaData?.TotalPages || 0); let i = index"
      [class.active]="productParams.PageNumber === i + 1"
      (click)="onPageChange(i + 1)"
      >
      <a class="page-link">{{ i + 1 }}</a>
    </li>

    <!-- Next Button -->
    <li
      class="page-item"
      [class.disabled]="!metaData?.HasNext"
      (click)="metaData?.HasNext && onPageChange(productParams.PageNumber + 1)"
      >
      <a class="page-link">Next &raquo;</a>
    </li>
  </ul>
</div>

    </div>
  </div>
</div>
